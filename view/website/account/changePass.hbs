<head>
    {{>websiteHeader}}
    {{{body}}}
</head>
<style>
    label.error {
        color: red !important;
    }
</style>
<section class="hero-section" id="aboutus">
    <div class="container">
        <div class="heros">
            <div class="row">
                <div class="col-lg-12">
                    <div class="hero-details text-center">
                        <h3 class="cursive text-center">Change Password</h3>
                        <h1 class="text-white text-center d-flex justify-content-center mb-4">Create New Password
                        </h1>
                        <ul class="ps-0 text-white d-flex flex-wrap gap-2 justify-content-center align-items-center"
                            style="list-style: none;">
                            <li class="text-yeloish">Home</li>
                            <li>></li>
                            <li>Change Password</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="changepassowrd" class="pt-50 pb-50">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="fs-36 mb-0 fw-bold mb-3">Change Password</h1>
                <form action="/website/changePass/{{users.[0]._id}}" method="post" id="formAuthentication">
                    <div class="row custom-margin">
                        <div class="col-lg-6">
                            <div class="position-relative">
                                <label for="opass">Old Password</label>
                                <input type="password" class="form-control form-custom" name="opass" value=""
                                    id="opass">
                                <a href="#" style="position: absolute ;top: 38px;right: 20px;
                                           "><i class="fa-regular fa-eye-slash toggle-password"
                                        toggle="#opass"></i></a>
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="position-relative">
                                <label for="npass">New Password</label>
                                <input type="password" class="form-control form-custom" name="npass" id="npass"
                                    value="">
                                <a href="#" style="position: absolute ;top: 38px;right: 20px;
                                        "><i class="fa-regular fa-eye-slash toggle-password" toggle="#npass"></i></a>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-12">
                        <div class="position-relative">
                            <label for="cpass">Confirm Password</label>
                            <input type="password" class="form-control form-custom" name="cpass" id="cpass" value="">
                            <a href="#" style="position: absolute ;top: 38px;right: 20px;
                                "><i class="fa-regular fa-eye-slash toggle-password" toggle="#cpass"></i></a>
                        </div>
                    </div>
                    <div class="">
                        <button type="submit" class="btn btn-custom">Update Password</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</section>

{{>websiteFooter}} {{{body}}}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"></script>
<script>
    $(".toggle-password").click(function () {
        $(this).toggleClass("fa-eye fa-eye-slash");
        var input = $($(this).attr("toggle"));
        if (input.attr("type") == "password") {
            input.attr("type", "text");
        } else {
            input.attr("type", "password");
        }
    });

    $(document).ready(function () {
        $("#formAuthentication").validate({
            rules: {
                opass: {
                    required: true
                },
                npass: {
                    minlength: 8,
                    required: true
                },
                cpass: {
                    required: true,
                    equalTo: "#npass"
                }
            },
            messages: {
                email: {
                    required: "Please enter old password"
                },
                npass: {
                    minlength: "Please enter minimum 8 digits",
                    required: "Please enter new password"
                },
                cpass: {
                    required: "Please enter new password",
                    equalTo: "New password and confirm password not matched"
                }
            }
        });
    });
</script>
<script>
    /* function passUpdate(e) {
         event.preventDefault();
         const opass = document.getElementsByName("opass")[0];
         const newpass = document.getElementsByName("npass")[0];
         const confirmpass = document.getElementsByName("cpass")[0];
         const errors = document.querySelectorAll('span.error');
         // Step 2: Loop through the NodeList and remove each errorSpan
         errors.forEach((errorSpan) => {
             errorSpan.remove();
         });
         if (opass.value == '') {
             const parent = newpass.parentNode;
             const error = document.createElement('span');
             error.classList.add("error");
             error.textContent = 'Please enter old password';
             // Insert the new <span> element after the parent element
             parent.insertAdjacentElement('beforeend', error);
         }
         if (newpass.value == '') {
             const parent = newpass.parentNode;
             const error = document.createElement('span');
             error.classList.add("error");
             error.textContent = 'Please enter new password';
             // Insert the new <span> element after the parent element
             parent.insertAdjacentElement('beforeend', error);
         }
         if (confirmpass.value == '') {
             const parent = confirmpass.parentNode;
             const error = document.createElement('span');
             error.classList.add("error");
             error.textContent = 'Please enter confirm password';
             // Insert the new <span> element after the parent element
             parent.insertAdjacentElement('beforeend', error);
         }
         if (confirmpass.value != newpass.value) {
             const parent = confirmpass.parentNode;
             const error = document.createElement('span');
             error.classList.add("error");
             error.textContent = 'New password and confirm password must be same';
             // Insert the new <span> element after the parent element
             parent.insertAdjacentElement('beforeend', error);
         }
         const errorMessages = document.querySelectorAll('span.error');
         if (errorMessages.length === 0) {
             // If there are no error messages, submit the form
             const form = document.getElementById('formAuthentication'); // Replace 'yourFormId' with the actual ID of your form
             form.submit();
         }
     }*/
</script>