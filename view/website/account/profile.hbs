<head>
    {{>websiteHeader}}
    {{{body}}}
    <style>
        .error {
            color: red !important;
        }

        .cover-icon {
            width: 44px;
            height: 44px;
            border-radius: 100%;
            -webkit-border-radius: 100%;
            -moz-border-radius: 100%;
            -ms-border-radius: 100%;
            -o-border-radius: 100%;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
            bottom: 0;
            right: 0;
            cursor: pointer;
        }
    </style>
</head>
<section class="hero-section" id="aboutus">
    <div class="container">
        <div class="heros">
            <div class="row">
                <div class="col-lg-12">
                    <div class="hero-details text-center">
                        <h3 class="cursive text-center">My Account</h3>
                        <h1 class="text-white text-center d-flex justify-content-center mb-4">Welcome {{decryption
                            userdata.[0].firstname}} {{decryption
                            userdata.[0].lastname}}
                        </h1>
                        <ul class="ps-0 text-white d-flex flex-wrap gap-2 justify-content-center align-items-center"
                            style="list-style: none;">
                            <li class="text-yeloish">Home</li>
                            <li>></li>
                            <li>My Account</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section id="listing" class="pt-50 pb-50 detail-margin">
    <div class="container">
        <div class="row pt-50 pb-50">
            <div class="col-lg-12 col-md-12 col-sm-12 col-12 mb-7 position-relative">
                <div class="circle-video position-relative" id="profile-response">
                    {{#if userdata.[0].coverImage}}
                    <img src="/assets/images/userImage/{{decryption userdata.[0].coverImage}}" alt="" id="circle-change"
                        style="aspect-ratio: auto !important;height: 400px;border-bottom-left-radius: 0 !important;border-bottom-right-radius: 0 !important;">
                    {{else}}
                    <img src="../../assets/images/profile.png" alt="" id="circle-change"
                        style="aspect-ratio: auto !important;height: 400px;border-bottom-left-radius: 0 !important;border-bottom-right-radius: 0 !important;">
                    {{/if}}
                    <div class="overlay"
                        style="height: 400px;border-bottom-left-radius: 0 !important;border-bottom-right-radius: 0 !important;">
                    </div>
                </div>
                <div class="profile-details position-relative">
                    <div class="profile-image d-flex gap-2 align-items-center"
                        style="position: absolute;bottom: 26px;left: 50px;">
                        {{#if userdata.[0].image}}
                        <img src="/assets/images/userImage/{{decryption userdata.[0].image}}" alt="" width="140"
                            height="140" class="rounded-circle" class="profile-images-changes">
                        {{else}}
                        <img src="../../assets/images/blank.png" alt="" width="140" height="140" class="rounded-circle"
                            class="profile-images-changes">
                        {{/if}}
                        <div class="d-flex flex-column">
                            <span class="username text-white ms-2">{{decryption
                                userdata.[0].firstname}} {{decryption
                                userdata.[0].lastname}}</span>
                        </div>
                    </div>
                </div>
                <div
                    class="followers-show d-flex justify-content-center align-items-center gap-5 bg-light-50 py-4 flex-wrap">
                    <div class="following d-flex align-items-center gap-2">
                        <a href="/website/followProfile" class="d-flex align-items-center gap-2">
                            <h4 class="mb-0">5</h4>
                            <span class="text-graish">Following</span>
                        </a>
                    </div>
                    <div class="followers ">
                        <a href="/website/followProfile" class="d-flex align-items-center gap-2">
                            <h4 class="mb-0">40</h4>
                            <span class="text-graish">Followers</span>
                        </a>
                    </div>
                </div>
                <div class="personal-details shadow-sm p-4">
                    <div class="d-flex justify-content-between align-items-center">
                        <h4 class="mb-0 text-color fw-600">Personal Details</h4>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#info-edit"><i
                                class="fa fa-edit text-color"></i></a>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="fname" class="fs-14">First name</label>
                        <h5 class="mb-0 fs-16">{{decryption
                            userdata.[0].firstname}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="lname" class="fs-14">Last name</label>
                        <h5 class="mb-0 fs-16">{{decryption
                            userdata.[0].lastname}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="lname" class="fs-14">Username</label>
                        <h5 class="mb-0 fs-16">{{decryption
                            userdata.[0].username}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="organization" class="fs-14">Organization</label>
                        <h5 class="mb-0 fs-16">{{decryption
                            userdata.[0].organization}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="email" class="fs-14">Email</label>
                        <h5 class="mb-0 fs-16">{{decryption
                            userdata.[0].email}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="number" class="fs-14">Mobile</label>
                        <h5 class="mb-0 fs-16">{{decryption
                            userdata.[0].countryCode}}-{{decryption
                            userdata.[0].phone}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="number" class="fs-14">Gender</label>
                        <h5 class="mb-0 fs-16">{{decryption
                            userdata.[0].gender}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="number" class="fs-14">Country</label>
                        <h5 class="mb-0 fs-16">{{#if userdata.[0].country}}{{decryption
                            userdata.[0].country}}{{else}}-{{/if}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="number" class="fs-14">Website</label>
                        <h5 class="mb-0 fs-16">{{#if userdata.[0].website}}{{decryption
                            userdata.[0].website}}{{else}}-{{/if}}</h5>
                    </div>
                    <div class="d-flex justify-content-between align-items-center mt-2">
                        <h4 class="mb-0 text-color  fw-600">Social</h4>
                        <a href="#" data-bs-toggle="modal" data-bs-target="#social-edit"><i
                                class="fa fa-edit text-color"></i></a>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="number" class="fs-14">Instagram</label>
                        <h5 class="mb-0 fs-14" style="word-break: break-word;">{{#if
                            userdata.[0].instagram}}{{{decryption
                            userdata.[0].instagram}}}{{else}}-{{/if}}
                        </h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="number" class="fs-14">Facebook</label>
                        <h5 class="mb-0 fs-14" style="word-break: break-word;">{{#if
                            userdata.[0].facebook}}{{{decryption
                            userdata.[0].facebook}}}{{else}}-{{/if}}</h5>
                    </div>
                    <div class="custom-margin mt-2">
                        <label for="number" class="fs-14">linkedin</label>
                        <h5 class="mb-0 fs-14" style="word-break: break-word;">{{#if
                            userdata.[0].linkedIn}}{{{decryption
                            userdata.[0].linkedIn}}}{{else}}-{{/if}}</h5>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<div class="modal fade" id="info-edit" tabindex="-1" aria-labelledby="exampleModalCenterTitle" aria-modal="true"
    role="dialog">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;">
        <div class="modal-content">
            <div class="modal-header ">
                <h1 class="modal-title fs-5" id="exampleModalCenterTitle">Personal Details</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body donate-modal">
                <form action="/website/editProfile/{{userdata.[0]._id}}" method="post" id="formAuthentication"
                    enctype="multipart/form-data">
                    <div class="custom-margin">
                        <div class="profile-image d-flex gap-2 align-items-center position-relative">
                            {{#if userdata.[0].image}}
                            <img src="/assets/images/userImage/{{decryption userdata.[0].image}}" alt="" width="140"
                                height="140" class="rounded-circle" id="profile-images-label">
                            {{else}}
                            <img src="../../assets/images/blank.png" alt="" width="140" height="140"
                                class="rounded-circle" id="profile-images-label">
                            {{/if}}
                            <label class="camra-icon" for="profile-change" id="label-click">
                                <img src="../../assets/images/icons/camera.png" alt="" class="" width="31" height="31">
                                <input type="file" name="userImage" id="profile-change" hidden="">
                            </label>
                        </div>
                    </div>
                    <div class="custom-margin">
                        <label for="cprofile">Cover profile</label>
                        <div class="position-relative">
                            <div class="cover-image">
                                {{#if userdata.[0].coverImage }}
                                <img src="/assets/images/userImage/{{decryption userdata.[0].coverImage}}" alt=""
                                    id="cover-preview" class="w-100" style="aspect-ratio: 16/9;">
                                {{else}}
                                <img src="../assets/images/static.png" alt="" id="cover-preview" class="w-100"
                                    style="aspect-ratio: 16/9;">
                                {{/if}}
                            </div>

                            <label class="cover-icon" for="cover-change" id="cover-click">
                                <img src="../../assets/images/icons/camera.png" alt="" class="" width="31" height="31">
                                <input type="file" name="cprofile" id="cover-change" hidden="">
                            </label>
                        </div>
                        {{!-- {{#if userdata.[0].coverImage}}
                        <input type="file" name="cprofile" value="{{decryption userdata.[0].coverImage}}"
                            class="form-control form-custom">
                        {{else}}
                        <input type="file" name="cprofile abc" value="" class="form-control form-custom">
                        {{/if}} --}}
                    </div>
                    <div class="custom-margin">
                        <label for="fname">First name</label>
                        <input type="text" name="firstname" class="form-control form-custom"
                            value="{{decryption userdata.[0].firstname}}">
                    </div>
                    <div class="custom-margin">
                        <label for="lname">Last name</label>
                        <input type="text" name="lastname" class="form-control form-custom"
                            value="{{decryption userdata.[0].lastname}}">
                    </div>
                    <div class="custom-margin">
                        <label for="username">Username</label>
                        <input type="text" name="username" class="form-control form-custom"
                            value="{{decryption userdata.[0].username}}">
                    </div>
                    <div class="custom-margin">
                        <label for="organization">Organization</label>
                        <input type="text" name="organization" class="form-control form-custom"
                            value="{{decryption userdata.[0].organization}}">
                    </div>
                    <div class="custom-margin">
                        <label for="email">Email</label>
                        <input type="email" name="email" class="form-control form-custom"
                            value="{{decryption userdata.[0].email}}" disabled>
                    </div>
                    <div class="custom-margin">
                        <label for="number">Mobile</label>
                        <input type="number" name="phone" class="form-control form-custom"
                            value="{{decryption userdata.[0].phone}}">
                    </div>
                    <div class="custom-margin">
                        <label for="rupees">Gender</label>
                        <select name="gender" id="" class="form-select form-control py-2">
                            <option value="{{decryption userdata.[0].gender}}" selected hidden>{{decryption
                                userdata.[0].gender}}
                            </option>
                            <option value="male">Male</option>
                            <option value="female">female</option>
                        </select>
                    </div>
                    <div class="custom-margin">
                        <label for="rupees">Country</label>
                        {{#if userdata.[0].country}}
                        <input type="text" name="country" class="form-control form-custom"
                            value="{{decryption userdata.[0].country}}">{{else}}
                        <input type="text" name="country" class="form-control form-custom" value="">{{/if}}
                    </div>
                    <div class="custom-margin">
                        <label for="number">Website</label>
                        {{#if userdata.[0].website}}
                        <input type="url" name="website" class="form-control form-custom"
                            value="{{{decryption userdata.[0].website}}}">
                        {{else}}
                        <input type="url" name="website" class="form-control form-custom" value="">
                        {{/if}}
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-custom">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="social-edit" tabindex="-1" aria-labelledby="exampleModalCenterTitle" aria-modal="true"
    role="dialog">
    <div class="modal-dialog modal-dialog-centered" style="max-width: 600px;">
        <div class="modal-content">
            <div class="modal-header ">
                <h1 class="modal-title fs-5" id="exampleModalCenterTitle">Socials</h1>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body donate-modal">
                <form action="/website/socialLinks/{{userdata.[0]._id}}" method="post" id="formAuthentication2">
                    <div class="custom-margin">
                        <label for="instagram">Instagram</label>
                        {{#if userdata.[0].instagram}}
                        <input type="url" name="instagram" class="form-control form-custom"
                            value="{{{decryption userdata.[0].instagram}}}">
                        {{else}}
                        <input type="url" name="instagram" class="form-control form-custom" value="">
                        {{/if}}
                    </div>
                    <div class="custom-margin">
                        <label for="facebook">Facebook</label>
                        {{#if userdata.[0].facebook}}
                        <input type="url" name="facebook" class="form-control form-custom"
                            value="{{{decryption userdata.[0].facebook}}}">
                        {{else}}
                        <input type="url" name="facebook" class="form-control form-custom" value="">
                        {{/if}}
                    </div>
                    <div class="custom-margin">
                        <label for="linkdin">Linkdin</label>
                        {{#if userdata.[0].linkedIn}}
                        <input type="url" name="linkedIn" class="form-control form-custom"
                            value="{{{decryption userdata.[0].linkedIn}}}">
                        {{else}}
                        <input type="url" name="linkedIn" class="form-control form-custom" value="">
                        {{/if}}
                    </div>
                    <div class="text-center">
                        <button type="submit" class="btn btn-custom">Update</button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>
{{>websiteFooter}} {{{body}}}

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.2/jquery.validate.min.js"></script>

<script>
    $(document).ready(function () {
        $('#profile-change').change(function () {
            var input = this;
            console.log({ input })
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#profile-images-label').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        });
        $('#cover-change').change(function () {
            var input = this;
            console.log({ input })
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#cover-preview').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        });

        $(document).ready(function () {
            $("#formAuthentication2").validate({
                rules: {
                    instagram: {
                        required: true
                    },
                    facebook: {
                        required: true
                    },
                    linkedIn: {
                        required: true
                    },
                },
                messages: {
                    instagram: {
                        required: "Please enter instagram link"
                    },
                    facebook: {
                        required: "Please enter facebook link"
                    },
                    linkedIn: {
                        required: "Please enter linkedIn link"
                    },
                }
            });
        });

        $(document).ready(function () {
            $("#formAuthentication").validate({
                rules: {
                    firstname: {
                        required: true
                    },
                    lastname: {
                        required: true
                    },
                    username: {
                        required: true
                    },
                    organization: {
                        required: true
                    },
                    country: {
                        required: true
                    },
                    website: {
                        required: true
                    },
                },
                messages: {
                    firstname: {
                        required: "Please enter firstname"
                    },
                    lastname: {
                        required: "Please enter lastname"
                    },
                    username: {
                        required: "Please enter username"
                    },
                    organization: {
                        required: "Please enter organization"
                    },
                    country: {
                        required: "Please enter country"
                    },
                    website: {
                        required: "Please enter website"
                    },
                }
            });
        });
    });
</script>